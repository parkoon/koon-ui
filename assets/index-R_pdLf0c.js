import{r as c,a as P}from"./index-l2PZgWEW.js";import{r as S}from"./index-CaNG7YX3.js";import{a as A}from"./index-Qo3TVfqq.js";function I(e,n){const o=c.createContext(n);function t(u){const{children:a,...i}=u,f=c.useMemo(()=>i,Object.values(i));return c.createElement(o.Provider,{value:f},a)}function r(u){const a=c.useContext(o);if(a)return a;if(n!==void 0)return n;throw new Error(`\`${u}\` must be used within \`${e}\``)}return t.displayName=e+"Provider",[t,r]}function w(e,n=[]){let o=[];function t(u,a){const i=c.createContext(a),f=o.length;o=[...o,a];function s(d){const{scope:l,children:$,...v}=d,h=(l==null?void 0:l[e][f])||i,x=c.useMemo(()=>v,Object.values(v));return c.createElement(h.Provider,{value:x},$)}function m(d,l){const $=(l==null?void 0:l[e][f])||i,v=c.useContext($);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${u}\``)}return s.displayName=u+"Provider",[s,m]}const r=()=>{const u=o.map(a=>c.createContext(a));return function(i){const f=(i==null?void 0:i[e])||u;return c.useMemo(()=>({[`__scope${e}`]:{...i,[e]:f}}),[i,f])}};return r.scopeName=e,[t,C(r,...n)]}function C(...e){const n=e[0];if(e.length===1)return n;const o=()=>{const t=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(u){const a=t.reduce((i,{useScope:f,scopeName:s})=>{const d=f(u)[`__scope${s}`];return{...i,...d}},{});return c.useMemo(()=>({[`__scope${n.scopeName}`]:a}),[a])}};return o.scopeName=n.scopeName,o}function L(e,n,{checkForDefaultPrevented:o=!0}={}){return function(r){if(e==null||e(r),o===!1||!r.defaultPrevented)return n==null?void 0:n(r)}}const b=globalThis!=null&&globalThis.document?c.useLayoutEffect:()=>{},g=P.useId||(()=>{});let E=0;function k(e){const[n,o]=c.useState(g());return b(()=>{e||o(t=>t??String(E++))},[e]),e||(n?`radix-${n}`:"")}function N(e){const n=c.useRef(e);return c.useEffect(()=>{n.current=e}),c.useMemo(()=>(...o)=>{var t;return(t=n.current)===null||t===void 0?void 0:t.call(n,...o)},[])}function D({prop:e,defaultProp:n,onChange:o=()=>{}}){const[t,r]=M({defaultProp:n,onChange:o}),u=e!==void 0,a=u?e:t,i=N(o),f=c.useCallback(s=>{if(u){const d=typeof s=="function"?s(e):s;d!==e&&i(d)}else r(s)},[u,e,r,i]);return[a,f]}function M({defaultProp:e,onChange:n}){const o=c.useState(e),[t]=o,r=c.useRef(t),u=N(n);return c.useEffect(()=>{r.current!==t&&(u(t),r.current=t)},[t,r,u]),o}function T(e,n){return c.useReducer((o,t)=>{const r=n[o][t];return r??o},e)}const O=e=>{const{present:n,children:o}=e,t=R(n),r=typeof o=="function"?o({present:t.isPresent}):c.Children.only(o),u=A(t.ref,r.ref);return typeof o=="function"||t.isPresent?c.cloneElement(r,{ref:u}):null};O.displayName="Presence";function R(e){const[n,o]=c.useState(),t=c.useRef({}),r=c.useRef(e),u=c.useRef("none"),a=e?"mounted":"unmounted",[i,f]=T(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const s=p(t.current);u.current=i==="mounted"?s:"none"},[i]),b(()=>{const s=t.current,m=r.current;if(m!==e){const l=u.current,$=p(s);e?f("MOUNT"):$==="none"||(s==null?void 0:s.display)==="none"?f("UNMOUNT"):f(m&&l!==$?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,f]),b(()=>{if(n){const s=d=>{const $=p(t.current).includes(d.animationName);d.target===n&&$&&S.flushSync(()=>f("ANIMATION_END"))},m=d=>{d.target===n&&(u.current=p(t.current))};return n.addEventListener("animationstart",m),n.addEventListener("animationcancel",s),n.addEventListener("animationend",s),()=>{n.removeEventListener("animationstart",m),n.removeEventListener("animationcancel",s),n.removeEventListener("animationend",s)}}else f("ANIMATION_END")},[n,f]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:c.useCallback(s=>{s&&(t.current=getComputedStyle(s)),o(s)},[])}}function p(e){return(e==null?void 0:e.animationName)||"none"}export{w as $,D as a,k as b,L as c,O as d,I as e,b as f,N as g};
